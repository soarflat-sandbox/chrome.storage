{"version":3,"sources":["webpack:///webpack/bootstrap 6e920cbb3129f84704bb","webpack:///./src/item.js","webpack:///./src/common/Utils.js","webpack:///./src/modules/DmmDomHandler.js","webpack:///./src/common/DomHandler.js"],"names":["init","keys","chrome","storage","local","get","items","newItem","getItemData","updatedItems","updateItems","console","log","set","functions","key","getHref","getImageUrl","getTitle","getCategories","getActresses","getFavoriteCount","mergeFunctionsReturningData","entity","dmmItems","index","findIndex","obj","href","splice","push","data","Utils","location","forEach","fn","DmmDomHandler","document","querySelectorAll","innerText","trim","getElementById","src","element","getTexts","selectors","Number","DomHandler","texts","tempTexts","Array","prototype","call","text"],"mappings":"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","file":"item.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6e920cbb3129f84704bb","import Utils from './common/Utils';\nimport DmmDomHandler from './modules/DmmDomHandler';\n\nconst init = () => {\n  const keys = 'dmmItems';\n\n  chrome.storage.local.get(keys, (items) => {\n    const newItem = getItemData();\n    const updatedItems = updateItems(items, newItem);\n\n    console.log(updatedItems);\n\n    chrome.storage.local.set(updatedItems);\n  });\n};\n\nconst getItemData = () => {\n  const functions = [\n    {\n      key: 'href',\n      get: Utils.getHref,\n    }, {\n      key: 'imageUrl',\n      get: DmmDomHandler.getImageUrl,\n    }, {\n      key: 'title',\n      get: DmmDomHandler.getTitle,\n    }, {\n      key: 'categories',\n      get: DmmDomHandler.getCategories,\n    }, {\n      key: 'actresses',\n      get: DmmDomHandler.getActresses,\n    }, {\n      key: 'favoriteCount',\n      get: DmmDomHandler.getFavoriteCount,\n    }\n  ];\n\n  return Utils.mergeFunctionsReturningData({ functions });\n};\n\nconst updateItems = (items, newItem) => {\n  const entity = {};\n  entity.dmmItems = items.dmmItems || [];\n  const index = entity.dmmItems.findIndex(obj => obj.href === newItem.href);\n\n  if (index > -1) {\n    entity.dmmItems.splice(index, 1)\n  }\n\n  return entity.dmmItems.push(data);\n};\n\ninit();\n\n\n\n// WEBPACK FOOTER //\n// ./src/item.js","export default class Utils {\n  static getHref() {\n    return location.href;\n  }\n\n  static mergeFunctionsReturningData({ functions }) {\n    const data = {};\n\n    functions.forEach((fn) => {\n      data[fn.key] = fn.get();\n    });\n\n    return data;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/Utils.js","import DomHandler from '../common/DomHandler';\n\n/**\n * DMMの商品ページのDOMに対する処理要求に応じるメソッドを提供するクラス\n */\nexport default class DmmDomHandler {\n\n  /**\n   * 商品タイトルを取得\n   * @return {string}\n   */\n  static getTitle() {\n    return document.querySelectorAll('#title')[0].innerText.trim();\n  }\n\n  /**\n   * 商品画像のURLを取得\n   * @return {string}\n   */\n  static getImageUrl() {\n    return document\n      .getElementById('sample-video')\n      .querySelectorAll('img')[0]\n      .src;\n  }\n\n  /**\n   * 商品のカテゴリを取得\n   * @return {array}\n   */\n  static getCategories() {\n    const element = document.querySelectorAll('.box-rank + table > tbody > tr')[10];\n    return DomHandler.getTexts({\n      element,\n      selectors: 'a'\n    });\n  }\n\n  /**\n   * 出演女優を取得\n   * @return {array}\n   */\n  static getActresses() {\n    const element = document.querySelectorAll('.box-rank + table > tbody > tr')[5];\n    return DomHandler.getTexts({\n      element,\n      selectors: 'a'\n    });\n  }\n\n  /**\n   * 商品のお気に入り数を取得\n   * @return {number}\n   */\n  static getFavoriteCount() {\n    return Number(document\n      .querySelectorAll('.box-rank .tx-count > span')[0]\n      .innerText\n      .trim()\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/DmmDomHandler.js","/**\n * DOMに対する汎用的な処理要求に応じるメソッドを提供するクラス\n */\nexport default class DomHandler {\n  /**\n   * セレクタから取得した複数のテキストを配列に格納して返す\n   * @param element\n   * @param selectors\n   * @returns {array}\n   */\n  static getTexts({ element = document, selectors }) {\n    const texts = element.querySelectorAll(selectors);\n    const tempTexts = [];\n\n    Array.prototype.forEach.call(texts, (text) => {\n      tempTexts.push(text.innerText.trim());\n    });\n\n    return tempTexts;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/DomHandler.js"],"sourceRoot":""}