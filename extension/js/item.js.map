{"version":3,"sources":["webpack:///webpack/bootstrap f2036de7d3ca94f7c560","webpack:///./src/common/Utils.js","webpack:///./src/item.js","webpack:///./src/modules/DmmDomHandler.js","webpack:///./src/common/DomHandler.js"],"names":["Utils","location","href","match","replace","functions","data","forEach","fn","key","get","keywords","text","matches","i","length","indexOf","push","init","keys","chrome","storage","local","items","entity","newItem","getItemData","dmmItems","updateItems","set","getId","getHref","getImageUrl","getTitle","getCategories","getActresses","getFavoriteCount","mergeFunctionsReturningData","index","findIndex","obj","id","splice","unshift","DmmDomHandler","document","querySelectorAll","innerText","trim","getElementById","src","element","getTexts","selectors","Number","DomHandler","texts","tempTexts","Array","prototype","call"],"mappings":"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","file":"item.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f2036de7d3ca94f7c560","export default class Utils {\n  static getHref() {\n    return location.href;\n  }\n\n  static getId() {\n    return location.href.match(/cid=(\\d|[a-z])+/g)[0].replace('cid=', '');\n  }\n\n  static mergeFunctionsReturningData({ functions }) {\n    const data = {};\n\n    functions.forEach((fn) => {\n      data[fn.key] = fn.get();\n    });\n\n    return data;\n  }\n\n  static matchKeywords({ keywords, text }) {\n    let matches = [];\n\n    for (let i = 0; i < keywords.length; i += 1) {\n      if (text.indexOf(keywords[i]) !== -1) {\n        matches.push(keywords[i])\n      } else {\n        break;\n      }\n    }\n\n    return matches.length === keywords.length;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/Utils.js","import Utils from './common/Utils';\nimport DmmDomHandler from './modules/DmmDomHandler';\n\nconst init = () => {\n  const keys = 'dmmItems';\n\n  chrome.storage.local.get(keys, (items) => {\n    let entity = {};\n    const newItem = getItemData();\n    entity.dmmItems = updateItems(items, newItem);\n\n    chrome.storage.local.set(entity);\n  });\n};\n\nconst getItemData = () => {\n  const functions = [\n    {\n      key: 'id',\n      get: Utils.getId,\n    }, {\n      key: 'href',\n      get: Utils.getHref,\n    }, {\n      key: 'imageUrl',\n      get: DmmDomHandler.getImageUrl,\n    }, {\n      key: 'title',\n      get: DmmDomHandler.getTitle,\n    }, {\n      key: 'categories',\n      get: DmmDomHandler.getCategories,\n    }, {\n      key: 'actresses',\n      get: DmmDomHandler.getActresses,\n    }, {\n      key: 'favoriteCount',\n      get: DmmDomHandler.getFavoriteCount,\n    }\n  ];\n\n  return Utils.mergeFunctionsReturningData({ functions });\n};\n\nconst updateItems = (items, newItem) => {\n  const dmmItems = items.dmmItems || [];\n  const index = dmmItems.findIndex(obj => obj.id === newItem.id);\n\n  if (index > -1) {\n    dmmItems.splice(index, 1)\n  }\n\n  dmmItems.unshift(newItem);\n\n  return dmmItems;\n};\n\ninit();\n\n\n\n// WEBPACK FOOTER //\n// ./src/item.js","import DomHandler from '../common/DomHandler';\n\n/**\n * DMMの商品ページのDOMに対する処理要求に応じるメソッドを提供するクラス\n */\nexport default class DmmDomHandler {\n\n  /**\n   * 商品タイトルを取得\n   * @return {string}\n   */\n  static getTitle() {\n    return document.querySelectorAll('#title')[0].innerText.trim();\n  }\n\n  /**\n   * 商品画像のURLを取得\n   * @return {string}\n   */\n  static getImageUrl() {\n    return document\n      .getElementById('sample-video')\n      .querySelectorAll('img')[0]\n      .src;\n  }\n\n  /**\n   * 商品のカテゴリを取得\n   * @return {array}\n   */\n  static getCategories() {\n    const element = document.querySelectorAll('.box-rank + table > tbody > tr')[10];\n    return DomHandler.getTexts({\n      element,\n      selectors: 'a'\n    });\n  }\n\n  /**\n   * 出演女優を取得\n   * @return {array}\n   */\n  static getActresses() {\n    const element = document.querySelectorAll('.box-rank + table > tbody > tr')[5];\n    return DomHandler.getTexts({\n      element,\n      selectors: 'a'\n    });\n  }\n\n  /**\n   * 商品のお気に入り数を取得\n   * @return {number}\n   */\n  static getFavoriteCount() {\n    return Number(document\n      .querySelectorAll('.box-rank .tx-count > span')[0]\n      .innerText\n      .trim()\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/DmmDomHandler.js","/**\n * DOMに対する汎用的な処理要求に応じるメソッドを提供するクラス\n */\nexport default class DomHandler {\n  /**\n   * セレクタから取得した複数のテキストを配列に格納して返す\n   * @param element\n   * @param selectors\n   * @returns {array}\n   */\n  static getTexts({ element = document, selectors }) {\n    const texts = element.querySelectorAll(selectors);\n    const tempTexts = [];\n\n    Array.prototype.forEach.call(texts, (text) => {\n      tempTexts.push(text.innerText.trim());\n    });\n\n    return tempTexts;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/common/DomHandler.js"],"sourceRoot":""}